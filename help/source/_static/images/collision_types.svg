<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 750" font-family="Arial, sans-serif">
  <defs>
    <marker id="ship" markerWidth="20" markerHeight="10" refX="10" refY="5" orient="auto">
      <polygon points="0 0, 20 5, 0 10" fill="#1976D2"/>
    </marker>
    <marker id="ship2" markerWidth="20" markerHeight="10" refX="10" refY="5" orient="auto">
      <polygon points="0 0, 20 5, 0 10" fill="#D32F2F"/>
    </marker>
    <marker id="arr2" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <text x="450" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#1a1a2e">Ship-Ship Collision Types (Hansen 2008)</text>

  <!-- HEAD-ON COLLISION -->
  <rect x="30" y="55" width="400" height="280" rx="10" fill="#e3f2fd" stroke="#1976D2" stroke-width="2"/>
  <text x="230" y="80" text-anchor="middle" font-size="16" font-weight="bold" fill="#0D47A1">Head-On Collision</text>

  <!-- Head-on diagram -->
  <!-- Ship 1 going right -->
  <line x1="80" y1="140" x2="220" y2="140" stroke="#1976D2" stroke-width="3" marker-end="url(#ship)"/>
  <text x="150" y="130" text-anchor="middle" font-size="10" fill="#1565C0">Ship i (V1, Q1)</text>
  <!-- Ship 2 going left -->
  <line x1="380" y1="160" x2="240" y2="160" stroke="#D32F2F" stroke-width="3" marker-end="url(#ship2)"/>
  <text x="310" y="180" text-anchor="middle" font-size="10" fill="#C62828">Ship j (V2, Q2)</text>

  <!-- Lateral distributions -->
  <text x="230" y="210" text-anchor="middle" font-size="11" fill="#333" font-style="italic">Opposite directions on same leg</text>

  <!-- Equations -->
  <text x="230" y="240" text-anchor="middle" font-size="10" fill="#0D47A1" font-weight="bold">V_ij = V1 + V2</text>
  <text x="230" y="258" text-anchor="middle" font-size="10" fill="#0D47A1" font-weight="bold">mu_ij = mu1 + mu2</text>
  <text x="230" y="276" text-anchor="middle" font-size="10" fill="#0D47A1" font-weight="bold">sigma_ij = sqrt(s1^2 + s2^2)</text>
  <text x="230" y="294" text-anchor="middle" font-size="10" fill="#0D47A1" font-weight="bold">P_G = Phi((mu+B)/s) - Phi((mu-B)/s)</text>
  <text x="230" y="318" text-anchor="middle" font-size="10" fill="#333">N_G = (Q1/V1)(Q2/V2) V_ij P_G L_w</text>

  <!-- OVERTAKING COLLISION -->
  <rect x="470" y="55" width="400" height="280" rx="10" fill="#e8f5e9" stroke="#4CAF50" stroke-width="2"/>
  <text x="670" y="80" text-anchor="middle" font-size="16" font-weight="bold" fill="#2E7D32">Overtaking Collision</text>

  <!-- Overtaking diagram -->
  <!-- Fast ship -->
  <line x1="520" y1="140" x2="700" y2="140" stroke="#1976D2" stroke-width="3" marker-end="url(#ship)"/>
  <text x="610" y="130" text-anchor="middle" font-size="10" fill="#1565C0">Fast ship (V_fast)</text>
  <!-- Slow ship -->
  <line x1="530" y1="165" x2="650" y2="165" stroke="#D32F2F" stroke-width="2" marker-end="url(#ship2)"/>
  <text x="590" y="185" text-anchor="middle" font-size="10" fill="#C62828">Slow ship (V_slow)</text>
  <!-- Speed difference arrow -->
  <line x1="700" y1="150" x2="650" y2="150" stroke="#FF9800" stroke-width="1" stroke-dasharray="3"/>

  <text x="670" y="210" text-anchor="middle" font-size="11" fill="#333" font-style="italic">Same direction, different speeds</text>

  <!-- Equations -->
  <text x="670" y="240" text-anchor="middle" font-size="10" fill="#2E7D32" font-weight="bold">V_ij = V_fast - V_slow (must &gt; 0)</text>
  <text x="670" y="258" text-anchor="middle" font-size="10" fill="#2E7D32" font-weight="bold">mu_ij = mu_fast - mu_slow</text>
  <text x="670" y="276" text-anchor="middle" font-size="10" fill="#2E7D32" font-weight="bold">sigma_ij = sqrt(s_f^2 + s_s^2)</text>
  <text x="670" y="294" text-anchor="middle" font-size="10" fill="#2E7D32" font-weight="bold">P_G = Phi((mu+B)/s) - Phi((mu-B)/s)</text>
  <text x="670" y="318" text-anchor="middle" font-size="10" fill="#333">Same formula structure as head-on</text>

  <!-- CROSSING COLLISION -->
  <rect x="30" y="360" width="400" height="360" rx="10" fill="#fff3e0" stroke="#FF9800" stroke-width="2"/>
  <text x="230" y="385" text-anchor="middle" font-size="16" font-weight="bold" fill="#E65100">Crossing Collision</text>

  <!-- Crossing diagram -->
  <!-- Leg 1 horizontal -->
  <line x1="80" y1="480" x2="280" y2="480" stroke="#1976D2" stroke-width="3" marker-end="url(#ship)"/>
  <text x="180" y="470" text-anchor="middle" font-size="10" fill="#1565C0">Leg 1 (Q1, V1)</text>
  <!-- Leg 2 diagonal -->
  <line x1="130" y1="540" x2="280" y2="430" stroke="#D32F2F" stroke-width="3" marker-end="url(#ship2)"/>
  <text x="230" y="510" text-anchor="middle" font-size="10" fill="#C62828">Leg 2 (Q2, V2)</text>

  <!-- Crossing angle -->
  <path d="M 220,480 A 40,40 0 0,1 248,458" fill="none" stroke="#FF9800" stroke-width="1.5"/>
  <text x="250" y="470" text-anchor="start" font-size="11" fill="#E65100" font-weight="bold">theta</text>

  <!-- Collision diameter illustration -->
  <circle cx="220" cy="477" r="30" fill="#FFF3E0" fill-opacity="0.5" stroke="#FFB74D" stroke-width="1.5" stroke-dasharray="4"/>
  <text x="220" y="540" text-anchor="middle" font-size="9" fill="#E65100">D_ij (collision</text>
  <text x="220" y="552" text-anchor="middle" font-size="9" fill="#E65100">diameter)</text>

  <!-- Equations -->
  <text x="230" y="580" text-anchor="middle" font-size="10" fill="#E65100" font-weight="bold">V_ij = sqrt(V1^2+V2^2-2V1V2cos(theta))</text>
  <text x="230" y="600" text-anchor="middle" font-size="10" fill="#E65100" font-weight="bold">D_ij = (L1+L2)|sin(theta)| + (B1+B2)|cos(theta)|</text>
  <text x="230" y="628" text-anchor="middle" font-size="10" fill="#333">N_G = Q1 Q2 D_ij / (V1 V2 sin(theta))</text>
  <text x="230" y="650" text-anchor="middle" font-size="10" fill="#333">Applied per year:</text>
  <text x="230" y="670" text-anchor="middle" font-size="10" fill="#333">N_G = Q1 Q2 D_ij / (V1 V2 |sin(theta)| sec/yr)</text>

  <!-- Causation factors table -->
  <text x="230" y="700" text-anchor="middle" font-size="10" fill="#795548" font-weight="bold">Default: P_c = 1.3E-4 (Pedersen)</text>

  <!-- BEND COLLISION -->
  <rect x="470" y="360" width="400" height="360" rx="10" fill="#f3e5f5" stroke="#9C27B0" stroke-width="2"/>
  <text x="670" y="385" text-anchor="middle" font-size="16" font-weight="bold" fill="#6A1B9A">Bend Collision</text>

  <!-- Bend diagram -->
  <!-- Leg before bend -->
  <line x1="520" y1="480" x2="650" y2="480" stroke="#1976D2" stroke-width="3"/>
  <text x="585" y="470" text-anchor="middle" font-size="10" fill="#1565C0">Before bend</text>
  <!-- Leg after bend -->
  <line x1="650" y1="480" x2="770" y2="430" stroke="#1976D2" stroke-width="3" marker-end="url(#ship)"/>
  <text x="720" y="420" text-anchor="middle" font-size="10" fill="#1565C0">After bend</text>
  <!-- Ship that didn't turn -->
  <line x1="650" y1="480" x2="810" y2="480" stroke="#D32F2F" stroke-width="2" stroke-dasharray="5" marker-end="url(#ship2)"/>
  <text x="740" y="500" text-anchor="middle" font-size="10" fill="#C62828">Failed to turn (P_0)</text>

  <!-- Bend angle -->
  <path d="M 690,480 A 40,40 0 0,1 710,453" fill="none" stroke="#9C27B0" stroke-width="1.5"/>
  <text x="710" y="470" text-anchor="start" font-size="11" fill="#6A1B9A" font-weight="bold">theta</text>

  <!-- Waypoint marker -->
  <circle cx="650" cy="480" r="6" fill="#FF9800" stroke="#E65100" stroke-width="2"/>
  <text x="650" y="520" text-anchor="middle" font-size="10" fill="#E65100">Waypoint</text>

  <!-- Equations -->
  <text x="670" y="560" text-anchor="middle" font-size="10" fill="#6A1B9A" font-weight="bold">Q_no_turn = Q x P_0 (typically P_0 = 0.01)</text>
  <text x="670" y="580" text-anchor="middle" font-size="10" fill="#6A1B9A" font-weight="bold">Q_turn = Q x (1 - P_0)</text>
  <text x="670" y="608" text-anchor="middle" font-size="10" fill="#333">N_bend = crossing(Q_no_turn, Q_turn, theta)</text>
  <text x="670" y="630" text-anchor="middle" font-size="10" fill="#333">Uses crossing formula with self-interaction</text>
  <text x="670" y="660" text-anchor="middle" font-size="10" fill="#795548" font-weight="bold">Default: P_c = 1.3E-4 (Pedersen)</text>

  <!-- Causation factors summary box -->
  <rect x="470" y="700" width="400" height="30" rx="5" fill="#efebe9" stroke="#795548" stroke-width="1"/>
  <text x="670" y="720" text-anchor="middle" font-size="10" fill="#4E342E">Accident Freq = N_G x P_causation (IALA defaults from Fujii/Pedersen)</text>
</svg>
